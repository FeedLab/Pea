<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:chart="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"
             x:Class="Pea.Meter.View.StatisticsView">

    <Grid>
        <Border Margin="48,64,48,64"
                HorizontalOptions="Fill"
                VerticalOptions="Fill"
                BackgroundColor="White"
                StrokeThickness="0"
                Padding="0">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="20" />
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="Black"
                        Offset="0,8"
                        Radius="24"
                        Opacity="0.15" />
            </Border.Shadow>

            <chart:SfCartesianChart
                Margin="16"
                HorizontalOptions="Fill"
                VerticalOptions="Fill"
                BackgroundColor="Transparent">

                <chart:SfCartesianChart.Legend>
                    <chart:ChartLegend>
                        <chart:ChartLegend.LabelStyle>
                            <chart:ChartLegendLabelStyle TextColor="Blue" Margin="5" FontSize="18"
                                                         FontAttributes="None" />
                        </chart:ChartLegend.LabelStyle>
                    </chart:ChartLegend>
                </chart:SfCartesianChart.Legend>

                <chart:SfCartesianChart.Title>
                    <Label
                        Margin="8"
                        HorizontalOptions="Fill"
                        HorizontalTextAlignment="Center"
                        FontAttributes="Bold"
                        FontSize="20"
                        Text="{Binding DateMeterData, StringFormat='{0:D}'}" />
                </chart:SfCartesianChart.Title>

                <chart:SfCartesianChart.XAxes>
                    <chart:DateTimeAxis>
                        <chart:DateTimeAxis.LabelStyle>
                            <chart:ChartAxisLabelStyle LabelFormat="HH:mm" />
                        </chart:DateTimeAxis.LabelStyle>
                    </chart:DateTimeAxis>
                </chart:SfCartesianChart.XAxes>

                <chart:SfCartesianChart.YAxes>
                    <chart:NumericalAxis>
                        <chart:NumericalAxis.Title>
                            <chart:ChartAxisTitle Text="Energy consumption in KW per Hour" />
                        </chart:NumericalAxis.Title>
                    </chart:NumericalAxis>
                </chart:SfCartesianChart.YAxes>

                <chart:SplineSeries ItemsSource="{Binding MeterDataToday}"
                                    Label="Today"
                                    XBindingPath="PeriodStart"
                                    YBindingPath="Total"
                                    Fill="Red"
                                    StrokeWidth="2"
                                    IsVisibleOnLegend="True"
                                    EnableTooltip="True" />

                <chart:SplineSeries ItemsSource="{Binding MeterDataAverage1}"
                                    Label="Average usage (Yesterday)"
                                    XBindingPath="PeriodStart"
                                    YBindingPath="Total"
                                    Fill="Orange"
                                    StrokeWidth="2"
                                    IsVisibleOnLegend="True"
                                    EnableTooltip="True" />
                
                <chart:SplineSeries ItemsSource="{Binding MeterDataAverage7}"
                                    Label="Average usage (7 days)"
                                    XBindingPath="PeriodStart"
                                    YBindingPath="Total"
                                    Fill="Blue"
                                    StrokeWidth="2"
                                    IsVisibleOnLegend="True"
                                    EnableTooltip="True" />

                <chart:SplineSeries ItemsSource="{Binding MeterDataAverage30}"
                                    Label="Average usage (30 days)"
                                    XBindingPath="PeriodStart"
                                    YBindingPath="Total"
                                    Fill="Green"
                                    StrokeWidth="2"
                                    IsVisibleOnLegend="True"
                                    EnableTooltip="True" />
            </chart:SfCartesianChart>
        </Border>
    </Grid>
</ContentView>